// âŒ é»‘åå•å…³é”®è¯ï¼ˆå¥³æ€§è‹±æ–‡åç±»ï¼‰
const blockedNameKeywords = [
  "aaliyah", "addison", "adeline", "adriana", "adrienne", "aileen", "alaina", "alana", "alayna", "alexa",
  "alexandra", "alexandria", "alexis", "alice", "alicia", "alina", "alison", "alivia", "allison", "alondra",
  "alyvia", "amara", "amber", "amelia", "amina", "ana", "anabelle", "anastasia", "andrea", "angel",
  "angeline", "angelique", "anika", "anita", "ann", "anna", "annabelle", "anne", "annette", "annie",
  "annika", "antoinette", "antonia", "anya", "april", "arianna", "ariel", "arilyn", "ariana", "aspen",
  "athena", "aubree", "aubrey", "audrey", "aurora", "autumn", "ayana", "ayla", "bailey", "barbara",
  "beatrice", "belinda", "bella", "bernice", "beth", "bethany", "beverly", "bianca", "blaire", "blake",
  "bonnie", "brandi", "briana", "brianna", "brielle", "britney", "brittany", "brittney", "brook", "brooke",
  "brooklyn", "brynn", "cadence", "caitlin", "caitlyn", "callie", "camila", "camille", "candace", "candice",
  "carla", "carly", "carmen", "carolyn", "carrie", "casey", "cassandra", "cassidy", "cassie", "catalina",
  "catherine", "cathy", "cecelia", "celeste", "celia", "charlene", "charlotte", "charmaine", "chaya", "chelsea",
  "cheri", "cheyenne", "chloe", "christa", "christian", "christie", "christina", "christine", "christy", "ciara",
  "cindy", "clair", "claire", "clara", "clarissa", "claudia", "colleen", "connie", "constance", "cora",
  "corinne", "courtney", "cristina", "crystal", "dahlia", "daisy", "dakota", "daleyza", "dana", "danica",
  "danielle", "daphne", "darcy", "darlene", "dawn", "deanna", "debbie", "deborah", "debra", "delaney",
  "delilah", "denise", "desiree", "destiny", "diamond", "diane", "dianna", "dianne", "dina", "dolores",
  "dominique", "dora", "doris", "dorothy", "ebony", "edith", "edna", "eileen", "elaina", "elaine",
  "eleanor", "elena", "elisa", "elisabeth", "elise", "eliza", "ella", "ellen", "ellie", "elsa",
  "elsie", "elvira", "elyse", "emelia", "emely", "emerson", "emilee", "emilia", "erica", "erika",
  "erin", "esmeralda", "esperanza", "essence", "estella", "estelle", "esther", "estrella", "eugenia", "eunice",
  "eve", "faith", "fatima", "faye", "felicia", "fernanda", "fiona", "florence", "frances", "francesca",
  "francine", "gabriela", "gabriella", "gabrielle", "gail", "genesis", "genevieve", "georgia", "geraldine", "gertrude",
  "gia", "giana", "gianna", "gillian", "gina", "ginger", "giovanna", "gladys", "glenda", "gloria",
  "goldie", "gracelyn", "gracie", "graciela", "greta", "gretchen", "guadalupe", "gwen", "gwendolyn", "hailey",
  "haley", "halle", "hanna", "hannah", "harper", "harriet", "hazel", "heaven", "heidi", "helen",
  "helena", "hilary", "hillary", "hollie", "holly", "hope", "ida", "ileen", "iliana", "imani",
  "india", "ingrid", "iris", "irma", "isabel", "isabela", "isabella", "isabelle", "isla", "itzel",
  "ivana", "ivy", "jacqueline", "jada", "jade", "jaelyn", "jaida", "jaime", "jaimie", "jaliyah",
  "jana", "jane", "janelle", "janessa", "janet", "janette", "janice", "janie", "janine", "jayda",
  "jayla", "jayleen", "jaylene", "jazlyn", "jazmin", "jazmine", "jean", "jeanette", "jeanne", "jeannette",
  "jemma", "jenna", "jennie", "jenny", "jessenia", "jessie", "jewel", "jill", "jillian", "joan",
  "joann", "joanna", "joanne", "jocelyn", "jodi", "jodie", "jody", "johanna", "johnnie", "jolene",
  "jordyn", "josephine", "josie", "joy", "joyce", "juana", "juanita", "judith", "judy", "julia",
  "juliana", "julianna", "julie", "juliet", "julieta", "juliette", "june", "justine", "kadence", "kaelyn",
  "kaia", "kailyn", "kaitlin", "kaitlyn", "kaiya", "kaley", "kali", "kallie", "kamila", "karina",
  "karla", "karlee", "karly", "kasey", "kassandra", "kassidy", "kate", "katelyn", "katelynn", "kathleen",
  "kathryn", "kathy", "katrina", "kay", "kaydence", "kaylee", "kayleigh", "kaylie", "kaylin", "keely",
  "keira", "kelli", "kellie", "kelsey", "kelsie", "kendall", "kendra", "kenia", "kenzie", "keyla",
  "khloe", "kia", "kiara", "kiera", "kierra", "kiley", "kimberly", "kira", "kirsten", "krista",
  "kristen", "kristi", "kristie", "kristin", "kristina", "kristine", "kristy", "krystal", "kyla", "kylee",
  "kyleigh", "kylie", "kyra", "lacey", "laila", "lana", "lara", "larissa", "latoya", "laurel",
  "lauryn", "layla", "leah", "leann", "leanna", "leanne", "leia", "leila", "leilani", "lena",
  "lenora", "leona", "lesley", "leslie", "lesly", "leticia", "lexi", "lexie", "lia", "liana",
  "lila", "lilian", "liliana", "lillian", "lilliana", "lillie", "lilly", "lily", "lilyana", "lina",
  "lizbeth", "lizeth", "lizette", "lola", "london", "lora", "lorena", "loretta", "lori", "lorna",
  "lorraine", "louise", "lucia", "lucille", "lucy", "luisa", "luna", "lupita", "luz", "lydia",
  "lyla", "lynn", "lynnette", "mabel", "macey", "maci", "macie", "mackenzie", "macy", "madalyn",
  "madeline", "madelyn", "madilyn", "madison", "mae", "maeve", "magdalena", "maggie", "maia", "makayla",
  "makenna", "makenzie", "malia", "mallory", "mandy", "mara", "marcella", "marcia", "margaret", "margarita",
  "margo", "marguerite", "maria", "mariah", "mariam", "mariana", "marianna", "maribel", "maricela", "mariela",
  "marilyn", "marina", "marisa", "marisol", "marissa", "maritza", "marjorie", "marla", "marlee", "marlene",
  "martha", "martina", "maryam", "mason", "matilda", "mattie", "maureen", "mavis", "maxine", "may",
  "maya", "mayra", "mckayla", "mckenna", "mckenzie", "meagan", "meaghan", "melanie", "melany", "melina",
  "melinda", "melody", "mercedes", "meredith", "mia", "micaela", "micah", "michaela", "michele", "miguelina",
  "mikaela", "mikayla", "mila", "milan", "milania", "mildred", "milena", "miley", "mina", "miranda",
  "mireya", "miriam", "miya", "moira", "mollie", "molly", "mona", "monique", "myah", "myra",
  "myrna", "nadine", "natalia", "natalie", "natasha", "nathalie", "nayeli", "neha", "nella", "nellie",
  "neveah", "nia", "nichole", "nikki", "nina", "noelle", "noemi", "nola", "nora", "norma",
  "nova", "octavia", "ofelia", "olga", "olive", "onyx", "paige", "paisley", "paloma", "pam",
  "paola", "patrice", "patty", "paula", "paulette", "pearl", "peggy", "penelope", "perla", "phoebe",
  "piper", "priscilla", "prudence", "queen", "rachael", "rachelle", "raegan", "raelyn", "raelynn", "rain",
  "ramona", "raquel", "raven", "raya", "reagan", "reanna", "rebekah", "reese", "regina", "reign",
  "reina", "reyna", "rhea", "rhonda", "ria", "rita", "roberta", "rochelle", "romina", "rosa",
  "rosalie", "rosalinda", "rosalyn", "rose", "rosemary", "roxanne", "ruby", "ruth", "ryann", "sabrina",
  "sadie", "sage", "saige", "sally", "samara", "sandy", "saniyah", "sarahi", "sarina", "sasha",
  "savanna", "scarlet", "scarlett", "selah", "selena", "selene", "serena", "serenity", "shania", "shannon",
  "shawna", "sheila", "shelby", "shelley", "shelly", "sheri", "sherri", "sherry", "shirley", "shyann",
  "siena", "sienna", "sierra", "simone", "skyla", "skylar", "skyler", "sloan", "sofia", "sonia",
  "sonya", "sophie", "stacey", "staci", "stacie", "stacy", "stella", "stephanie", "sue", "summer",
  "susana", "susanna", "suzanne", "sydney", "sylvia", "tabitha", "taisha", "talia", "tamara", "tameka",
  "tami", "tamika", "tammie", "tammy", "tania", "tanya", "tara", "taryn", "tatiana", "tatum",
  "tatyana", "taya", "teagan", "teresa", "teri", "terra", "tess", "tessa", "thalia", "thea",
  "theresa", "tia", "tiana", "tianna", "tiara", "tierra", "tina", "tori", "tracey", "traci",
  "tracie", "tracy", "trinity", "trisha", "trista", "valeria", "valerie", "valery", "vanessa", "velma",
  "vera", "veronica", "vicki", "vickie", "viola", "violet", "vivian", "viviana", "wanda", "whitney",
  "willow", "winnie", "xena", "xiomara", "yadira", "yamileth", "yareli", "yaretzi", "yasmin", "yeardley",
  "yesenia", "yolanda", "yvette", "yvonne", "zahra", "zaria", "zariah", "zoe", "zoey", "mary","Ayesha","Carly","Stefanie","Celia","Celly","Dela","melissa"  
];

// âŒ é»‘åå•å…³é”®è¯ï¼ˆå…¶å®ƒç±»ï¼šåŠ å¯†ã€é‡‘èã€è¯ˆéª—ç­‰ï¼‰
const blockedGeneralKeywords = [
  "female", "woman", "women", "girl", "wife", "mother", "mom", "mum", "grandmother", "grandma", "married", "husband",
  "ladies", "lady", "ms", "mrs", "dog mom", "cat lady", "widow", "grammy", "he/him", "his/him", "she/her", "her/she", 
  "they/them", "he/they", "she/they", "nonbinary", "genderfluid", "genderqueer", "agender", "demiboy", "demigirl",
  "femboy", "trans", "transgender", "mtf", "ftm", "ğŸ³ï¸â€âš§ï¸", "ğŸ³ï¸â€ğŸŒˆ", "it", "tech", "programmer", "coder", "developer", 
  "web developer", "frontend", "backend", "fullstack", "data scientist", "ai engineer", "machine learning", "cybersecurity", 
  "cloud", "devops", "software engineer", "system admin", "ux designer", "ui designer", "product manager", "scrum master", 
  "agile coach", "blockchain", "it consultant", "computer scientist", "fintech", "crypto", "bitcoiner", "nft", "bitcoin", 
  "cryptocurrency", "finance", "bank", "banker", "investment", "portfolio manager", "hedge fund", "financial advisor", 
  "real estate", "realtor", "broker", "insurance", "claims adjuster", "underwriter", "loan officer", "credit analyst", 
  "cpa", "auditor", "stockbroker", "wealth manager", "actuary", "scam", "scammer", "fraud", "ripoff", "swindle", "cheat", 
  "deception", "bot", "chat", "dm", "dms", "police", "librarian", "block","computer engineer","Gay"

];

// ğŸ¯ ç›®æ ‡å…³é”®è¯ï¼ˆç”·æ€§è‹±æ–‡åç±»ï¼‰
const targetNameKeywords = [
  "james", "john", "robert", "michael", "william", "david", "richard", "joseph", "thomas", "charles", "christopher", 
  "daniel", "matthew", "anthony", "donald", "mark", "paul", "steven", "andrew", "kenneth", "joshua", "kevin", "brian", 
  "george", "edward", "ronald", "timothy", "jason", "jeffrey", "ryan", "jacob", "gary", "nicholas", "eric", "stephen", 
  "jonathan", "larry", "justin", "scott", "brandon", "frank", "benjamin", "gregory", "raymond", "samuel", "patrick", 
  "alexander", "jack", "dennis", "jerry", "tyler", "aaron", "jose", "henry", "adam", "douglas", "nathan", "peter", 
  "zachary", "kyle", "walter", "harold", "jeremy", "ethan", "carl", "keith", "roger", "gerald", "christian", "terry", 
  "sean", "arthur", "austin", "noah", "lawrence", "jesse", "joe", "billy", "bryan", "bruce", "jordan", "ralph", "roy", 
  "alan", "wayne", "eugene", "juan", "russell", "louis", "vincent", "bobby", "philip", "johnny", "logan", "randy", "matt", 
  "tony", "danny", "shawn", "craig", "aaron", "abel", "abraham", "ace", "adrian", "aiden", "albert", "alex", "alfred", 
  "alvin", "amir", "amos", "anders", "angelo", "archer", "arlo", "asa", "asher", "atlas", "atticus", "august", "avery", 
  "axel", "barrett", "beau", "beckham", "bennett", "bentley", "blake", "bodhi", "bradley", "brady", "brantley", "braxton", 
  "brayden", "brock", "brooks", "bruno", "bryce", "caleb", "callum", "calvin", "camden", "cameron", "carlos", "carson", 
  "carter", "cash", "cason", "charlie", "chase", "chris", "clark", "clayton", "cody", "cohen", "cole", "colin", "collin", 
  "colton", "conner", "connor", "cooper", "corbin", "corey", "cyrus", "damian", "damien", "dane", "dante", "darren", 
  "dawson", "dean", "declan", "derek", "desmond", "devin", "diego", "dominic", "donovan", "drew", "duke", "easton", 
  "eddie", "edgar", "edison", "eduardo", "edwin", "eli", "elias", "elijah", "elliot", "ellis", "elmer", "emerson", "emery", 
  "emiliano", "emilio", "emmanuel", "emmett", "enzo", "erik", "ernest", "everett", "ezekiel", "ezra", "fabian", "felix", 
  "fernando", "finn", "finley", "fisher", "fletcher", "ford", "forrest", "fox", "francis", "francisco", "franklin", 
  "frederick", "gabriel", "gael", "gage", "garrett", "gavin", "gideon", "gilbert", "giovanni", "glenn", "gordon", "grady", 
  "graham", "grant", "grayson", "greyson", "griffin", "gunner", "gustavo", "hank", "harrison", "harry", "harvey", "hayden", 
  "heath", "hector", "holden", "howard", "hudson", "hugh", "hugo", "ian", "ibrahim", "ignacio", "ira", "isaac", "isaiah", 
  "israel", "ivan", "jackson", "jaden", "jake", "jameson", "jared", "jasper", "javier", "jax", "jaxon", "jaxson", "jay", 
  "jayce", "jayden", "jeffery", "jeremiah", "jesus", "joel", "jonah", "jonas", "jorge", "josiah", "jude", "julian", "julio", 
  "julius", "junior", "kai", "kaleb", "kane", "karl", "karson", "karter", "khalid", "killian", "king", "knox", "kobe", 
  "kody", "kole", "korbin", "kyler", "lance", "landon", "lane", "lawson", "legend", "leo", "leon", "leonard", "leonardo", 
  "levi", "lewis", "liam", "lincoln", "lionel", "lorenzo", "luca", "lucas", "luis", "luke", "lyric", "maddox", "magnus", 
  "malcolm", "manuel", "marcel", "marco", "marcos", "marcus", "mario", "marshall", "martin", "marvin", "mateo", "matthias", 
  "maurice", "maverick", "max", "maximilian", "maxwell", "micah", "miguel", "miles", "milo", "mitchell", "mohamed", 
  "mohammed", "morgan", "moses", "muhammad", "nash", "nathaniel", "neil", "nelson", "nico", "nicolas", "nigel", "nolan", 
  "omar", "orlando", "oscar", "otto", "owen", "pablo", "parker", "pedro", "peyton", "phillip", "phoenix", "quentin", 
  "quincy", "quinn", "rafael", "ramon", "randall", "raphael", "raul", "ray", "reed", "reese", "reggie", "reid", "remington", 
  "rex", "rhett", "ricardo", "ricky", "riley", "river", "roberto", "robin", "rocco", "rocky", "rodney", "roland", "roman", 
  "romeo", "ronin", "rory", "ross", "rowan", "ryder", "salvador", "sam", "samson", "santiago", "saul", "sebastian", 
  "sergio", "seth", "shane", "silas", "simon", "solomon", "sonny", "spencer", "stanley", "sullivan", "tate", "theo", 
  "theodore", "titus", "tobias", "todd", "tomas", "tommy", "trace", "travis", "trent", "trenton", "trevor", "tristan", 
  "tucker", "tyson", "vance", "victor", "vincenzo", "wade", "walker", "warren", "waylon", "wesley", "weston", "wilder", 
  "winston", "wyatt", "xavier", "yahir", "yahya", "yosef", "zander", "zane", "zayden", "zeke", "zion", "zyaire", "zyon"
];

// ğŸ¯ ç›®æ ‡å…³é”®è¯ï¼ˆå…¶å®ƒç±»ï¼šèŒä¸šã€å…´è¶£ã€èº«ä»½ç­‰ï¼‰
const targetGeneralKeywords = [
  "man", "male", "masculine", "himself", "gentleman", "guy", "mr", "sir", "gent", "uncle", "dad", "father", "grandfather", 
  "grandpa", "old man", "elderly", "senior", "widower", "lonely", "divorced", "photographer", "photo", "camera", "nature", 
  "bird", "travel", "woodworking", "gardening", "classic car", "fishing", "model train", "aquarium", "snake", "collector", 
  "dog lover", "painter", "artist", "musician", "veteran", "pilot", "air force", "navy", "army", "marine", "fire", 
  "carpenter", "mechanic", "truck driver", "electrician", "plumber", "welder", "construction", "contractor", "rancher", 
  "engineer", "aerospace", "aviation", "civil", "electrical", "mechanical", "industrial", "chemical", "mining", 
  "environmental", "architecture", "doctor", "dr.", "md", "m.d.", "phd", "dentist", "psychiatrist", 
  "consultant physician", "orthodontist", "oral surgeon", "prosthodontist", "pediatric dentist", "cardiologist", 
  "neurologist", "pediatrician", "radiologist", "urologist", "gynecologist", "dermatologist", "oncologist", 
  "gastroenterologist", "nephrologist", "endocrinologist", "pathologist", "anesthesiologist", "ophthalmologist", "surgeon", 
  "general surgeon", "ent specialist", "rehabilitation specialist", "clinical doctor", "licensed doctor", "medical phd", 
  "teacher", "nurse", "retired", "retiring", "semi-retired", "recently retired", "ret.", "alabama", "alaska", "arizona", 
  "arkansas", "california", "colorado", "connecticut", "delaware", "florida", "georgia", "hawaii", "idaho", "illinois", 
  "indiana", "iowa", "kansas", "kentucky", "louisiana", "maine", "maryland", "massachusetts", "michigan", "minnesota", 
  "mississippi", "missouri", "montana", "nebraska", "nevada", "new hampshire", "new jersey", "new mexico", "new york", 
  "north carolina", "north dakota", "ohio", "oklahoma", "oregon", "pennsylvania", "rhode island", "south carolina", 
  "south dakota", "tennessee", "texas", "utah", "vermont", "virginia", "washington", "west virginia", "wisconsin", 
  "wyoming" , "blue dot", "resister", "woke", "anti-trump", 
  "left-handed", "retirement", "former", "ex-", "used to", "done with work", "no longer working", "life after service", 
  "past life", "previously" ,  "petroleum", "marine", "automotive", "railway", "geotechnical", 
  "structural", "agricultural", "textile", "acoustic", "ceramic",
  "corrosion", "sanitary", "forest", "metallurgical",
  "heating", "ventilation", "air conditioning", "pipeline" , "airline captain", "first officer", "flight engineer", "test pilot",
  "astronaut", "mission specialist", "rocket scientist", "propulsion",
  "aeronautical", "avionics",
  "neurosurgeon", "plastic surgeon", "orthopedic surgeon", "cardiac surgeon",
  "ship captain", "chief engineer", "offshore", "drilling", "reservoir", "blue politics" ,  "air america","american","americans","usa","u.s.","us citizen","united states","america","born in usa","from usa","in the usa","us veteran","us army","retired usa","military usa","american culture","american values","native american","living in america","american made","american pride","from the states","retired in usa","us navy","usmc","usaf","army veteran","navy veteran","retired american","democrat" , "living" ,"scientist", "researcher", "academic", "scholar", "biologist", "biology", "botanist", "botany", "zoologist", "zoology", "geneticist", "genetics", "ecologist", "ecology", "chemist", "chemistry", "physicist", "physics", "astronomer", "astronomy", "geologist", "geology", "seismologist", "seismology", "hydrologist", "hydrology", "oceanographer", "oceanography", "meteorologist", "meteorology", "climatologist", "climatology", "geographer", "geography", "cartographer", "cartography", "anthropologist", "anthropology", "archaeologist", "archaeology", "sociologist", "sociology", "psychologist", "psychology", "criminologist", "criminology", "historian", "history", "philosopher", "philosophy", "linguist", "linguistics", "statistician", "statistics", "mathematician", "mathematics", "toxicologist", "toxicology", "pharmacologist", "pharmacology", "epidemiologist", "epidemiology", "virologist", "virology", "immunologist", "immunology", "neuroscientist", "neuroscience", "biochemist", "biochemistry", "geochemist", "geochemistry", "geophysicist", "geophysics", "environmentalist", "environmental science", "pathologist", "pathology" , "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "70", "71", "72", "73", "74", "75" 
];



// ======= å·¥å…·å‡½æ•° =======
function matchWholeWord(text, keywords) {
  const lower = text.toLowerCase();
  return keywords.some(w => new RegExp(`\\b${w}\\b`, "i").test(lower));
}
function matchSubstring(text, keywords) {
  const lower = text.toLowerCase();
  return keywords.some(w => lower.includes(w.toLowerCase()));
}
function extractUsername(text) {
  const match = text.match(/@([\w\-\.]+)\.bsky\.social/);
  return match ? match[1].toLowerCase() : "";
}
function normalize(text) {
  return text.toLowerCase().trim();
}

// ======= çŠ¶æ€æ§åˆ¶ =======
let followCount = 0;
let isPaused = true;
const processedUsers = new Set();
const followQueue = [];

// ======= ç²¾å‡†æ¸…é™¤å¤´åƒ background-image =======
function clearAvatarBackgrounds() {
  const avatars = document.querySelectorAll('div[style*="background-image"][class*="css-g5y9jx"]');
  avatars.forEach(div => {
    div.style.backgroundImage = 'none';
  });
}

// ======= åŠ¨æ€ç›‘å¬å¤´åƒåŠ è½½è‡ªåŠ¨æ¸…é™¤ =======
const avatarObserver = new MutationObserver(clearAvatarBackgrounds);
avatarObserver.observe(document.body, { childList: true, subtree: true });

// ======= è·å–ç”¨æˆ·èµ„æ–™ API =======
async function getProfileData(handle) {
  if (!handle || handle.startsWith("did:")) return null;
  try {
    const url = `https://public.api.bsky.app/xrpc/app.bsky.actor.getProfile?actor=${handle}`;
    const res = await fetch(url);
    if (!res.ok) return null;
    return await res.json();
  } catch (err) {
    console.error(`ğŸš¨ è·å–ç”¨æˆ· ${handle} çš„èµ„æ–™å¤±è´¥`, err.message || err);
    return null;
  }
}

// ======= å¡ç‰‡å¤„ç†é€»è¾‘ï¼ˆå»¶è¿Ÿåˆ¤æ–­ï¼‰=======
async function handleCard(card, retry = 0) {
  try {
    if (card.dataset.processed || isPaused) return;

    const cardText = card.innerText;
    if (!cardText || cardText.length < 10) {
      if (retry < 3) return setTimeout(() => handleCard(card, retry + 1), 150);
      return;
    }

    const nickMatch = cardText.match(/^(.*?)\n@/);
    const nickname = nickMatch ? normalize(nickMatch[1]) : "";
    const username = extractUsername(cardText);
    const bioText = cardText.replace(nickMatch?.[0] || "", "").replace(/@\w+\.bsky\.social/, "").trim();
    const hasBio = bioText.length > 0;

    if (!username || processedUsers.has(username)) return;
    card.dataset.processed = "true";
    processedUsers.add(username);

    if (
      matchSubstring(nickname, blockedNameKeywords) ||
      matchSubstring(username, blockedNameKeywords) ||
      (hasBio && matchWholeWord(bioText, blockedGeneralKeywords))
    ) {
      console.warn(`â›”ï¸ Blocked: ${nickname} (${username})`);
      return;
    }

    let matched = false;
    if (hasBio) {
      if (
        matchSubstring(nickname, targetNameKeywords) ||
        matchSubstring(username, targetNameKeywords) ||
        matchSubstring(bioText, targetGeneralKeywords)
      ) matched = true;
    } else {
      if (
        matchSubstring(nickname, targetNameKeywords) ||
        matchSubstring(username, targetNameKeywords) ||
        matchSubstring(nickname, targetGeneralKeywords) ||
        matchSubstring(username, targetGeneralKeywords)
      ) matched = true;
    }

    if (!matched) {
      console.log(`ğŸŸ¤ Skipped: ${nickname} (${username}) ä¸ç¬¦åˆç›®æ ‡å…³é”®è¯`);
      return;
    }

    const fullHandle = username.includes('.') ? username : `${username}.bsky.social`;
    const profile = await getProfileData(fullHandle);
    if (!profile) return;

    const { followersCount = 0, followsCount = 0 } = profile;
    if (followersCount < 500 && followsCount < 500) {
      card._followBtn = card._followBtn || card.querySelector('button[aria-label="Follow"], button[aria-label="å…³æ³¨"]');
      if (card._followBtn) {
        followQueue.push({ btn: card._followBtn, card });
        console.log(`ğŸ”œ Enqueued follow: ${nickname} (${username}) ç²‰ä¸ ${followersCount} / å…³æ³¨ ${followsCount}`);
      }
    } else {
      console.log(`â›”ï¸ Skipped (ç²‰ä¸/å…³æ³¨é«˜): ${nickname} (${username}) ç²‰ä¸ ${followersCount} / å…³æ³¨ ${followsCount}`);
    }

  } catch (err) {
    console.error("ğŸš¨ handleCard é”™è¯¯", err);
  }
}

// ======= æ‰«æå¹¶å¤„ç†æ‰€æœ‰å¡ç‰‡ =======
function processAllCards() {
  if (isPaused) return;
  const allCards = Array.from(document.querySelectorAll('div[style*="padding"][style*="border-top-width"]'));
  const unprocessedCards = allCards.filter(card => !card.dataset.processed);
  for (const card of unprocessedCards) {
    handleCard(card);
  }
}

// ======= è‡ªåŠ¨ç‚¹å‡»å…³æ³¨é˜Ÿåˆ— =======
async function dequeueFollow() {
  if (isPaused || followQueue.length === 0) {
    setTimeout(dequeueFollow, 500);
    return;
  }

  const { btn } = followQueue.shift();
  try {
    btn.click();
    followCount++;
    counterBox.innerText = `âœ… Followed: ${followCount}`;
    console.log(`âœ… Followed`);
  } catch (e) {
    console.warn("âš ï¸ Follow failed", e);
  } finally {
    setTimeout(dequeueFollow, 100);
  }
}
dequeueFollow();

// ======= è§‚å¯Ÿé¡µé¢å˜åŒ–ï¼Œè‡ªåŠ¨è§¦å‘å¤„ç† =======
const observer = new MutationObserver(() => {
  if (!isPaused) {
    setTimeout(processAllCards, 200);
  }
});
observer.observe(document.body, { childList: true, subtree: true });

// ======= æ¯0.5ç§’é—ªç°åˆ°åº•éƒ¨ =======
setInterval(() => {
  if (!isPaused) {
    window.scrollTo({ top: document.body.scrollHeight });
  }
}, 500);

// ======= UI çŠ¶æ€æ¡† =======
const counterBox = document.createElement("div");
Object.assign(counterBox.style, {
  position: "fixed", bottom: "20px", right: "20px",
  backgroundColor: "#222", color: "#0f0", padding: "10px 15px",
  borderRadius: "8px", fontSize: "14px", zIndex: "9999",
  boxShadow: "0 0 8px rgba(0,0,0,0.5)", display: "none"
});
counterBox.innerText = `âœ… Followed: 0`;
document.body.appendChild(counterBox);

// ======= å¿«æ·é”®æ§åˆ¶ï¼ˆRå¯åŠ¨/Qæš‚åœï¼‰=======
alert("ğŸŸ¡ è‡ªåŠ¨å…³æ³¨å·²å°±ç»ªï¼ŒæŒ‰ R å¼€å§‹ï¼ŒæŒ‰ Q æš‚åœ");
document.addEventListener("keydown", (e) => {
  const key = e.key.toLowerCase();
  if (key === "q") {
    isPaused = true;
    counterBox.style.display = "none";
    console.log("â¸ å·²æš‚åœè‡ªåŠ¨å…³æ³¨");
  } else if (key === "r") {
    isPaused = false;
    counterBox.style.display = "block";
    console.log("â–¶ï¸ å·²æ¢å¤è‡ªåŠ¨å…³æ³¨");

    clearAvatarBackgrounds(); // âœ… ç²¾å‡†æ¸…é™¤å¤´åƒ background
    processAllCards();
  }
});
